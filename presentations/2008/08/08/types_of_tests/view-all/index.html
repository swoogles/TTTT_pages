<!DOCTYPE html>
<html lang="en-US">
<!--
    Started with this Hacker layout:
        https://github.com/pages-themes/hacker/blob/master/_layouts/default.html
-->
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/TTTT_pages/assets/css/style.css?v=54c77e38ed2b0a2ba87a8944794e1e67804a9284">

    <style>
    header { border-bottom: 1px solid #000; }
header h1 { display: inline; }
header h2 {  display: inline; }
header a {  align: right; }

.center {
    text-align: center;
}

    </style>

    <script type="text/javascript">
        // This is LIKELY where the problem with my next/prev links can be fixed.
// TODO as soon as its done here, make sure it's fixed EVERYWHERE.
function setup_keypress() {
    document.onkeydown = function(e) {
        switch (e.keyCode) {
            
            case 37: // left
                document.location.href = "/TTTT_pages/presentations/2008/08/08/types_of_tests/page40of40.html";
                break;
            
            
        }
    }
}

    </script>
    <script type="text/javascript">
        function detectswipe(el,func) {
    swipe_det = new Object();
    swipe_det.sX = 0; swipe_det.sY = 0; swipe_det.eX = 0; swipe_det.eY = 0;
    var min_x = 30;  //min x swipe for horizontal swipe
    var max_x = 30;  //max x difference for vertical swipe
    var min_y = 50;  //min y swipe for vertical swipe
    var max_y = 60;  //max y difference for horizontal swipe
    var direc = "";
    ele = document.getElementById(el);
    ele.addEventListener('touchstart',function(e){
        var t = e.touches[0];
        swipe_det.sX = t.screenX;
        swipe_det.sY = t.screenY;
    },false);
    ele.addEventListener('touchmove',function(e){
        e.preventDefault();
        var t = e.touches[0];
        swipe_det.eX = t.screenX;
        swipe_det.eY = t.screenY;
    },false);
    ele.addEventListener('touchend',function(e){
        //horizontal detection
        if ((((swipe_det.eX - min_x > swipe_det.sX) || (swipe_det.eX + min_x < swipe_det.sX)) && ((swipe_det.eY < swipe_det.sY + max_y) && (swipe_det.sY > swipe_det.eY - max_y) && (swipe_det.eX > 0)))) {
            if(swipe_det.eX > swipe_det.sX) direc = "r";
            else direc = "l";
        }
        //vertical detection
        else if ((((swipe_det.eY - min_y > swipe_det.sY) || (swipe_det.eY + min_y < swipe_det.sY)) && ((swipe_det.eX < swipe_det.sX + max_x) && (swipe_det.sX > swipe_det.eX - max_x) && (swipe_det.eY > 0)))) {
            if(swipe_det.eY > swipe_det.sY) direc = "d";
            else direc = "u";
        }

        if (direc != "") {
            if(typeof func == 'function') func(el,direc);
        }
        direc = "";
        swipe_det.sX = 0; swipe_det.sY = 0; swipe_det.eX = 0; swipe_det.eY = 0;
    },false);
}

function swipeNavigation(el,d) {
    console.log("swipeNavigation");
    if ( d === "l" ) {
        document.location.href = "";
    } else if ( d === "r") {
        document.location.href = "/TTTT_pages/presentations/2008/08/08/types_of_tests/page40of40.html";
    }
    // alert("you swiped on element with id '"+el+"' to "+d+" direction");
}
    </script>
    <script type="text/javascript">
        function addLoadEvent(func) {
            console.log("adding a load event. Func:  " + func)
            var oldonload = window.onload;
            if (typeof window.onload != 'function') {
                window.onload = func;
            } else {
                window.onload = function() {
                    if (oldonload) {
                        oldonload();
                    }
                    func();
                }
            }
        }
        addLoadEvent(setup_keypress)
    </script>


</head>

<body>

<div class="container">
    <section id="main_content">
        <!--
    This started as the Hacker layout here:
        https://github.com/pages-themes/hacker/blob/master/_layouts/post.html)
-->

<!-- TODO Figure out how to jump to beginning of section.
        Something like looking for a post where category matches this one and also has "section-intro" category.
-->



<h1>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</h1>

<h2 class="center" id="types-of-tests-and-testable-types">Types of Tests and Testable Types</h2>

<p class="center">Use left/right arrows or swipe to navigate backwards/forwards</p>

<p class="center"><a href="github.com/swoogles/TTTT">github.com/swoogles/TTTT</a></p>

<h1 id="why-talk-about-this-stuff">Why talk about this stuff?</h1>

<ul>
  <li>Unrelated Test Failures</li>
  <li>Long, complicated test cases</li>
  <li>Irreproducible failures</li>
</ul>

<h1 id="nonobjectives">Non-Objectives</h1>

<ul>
  <li>Diving into any particular testing framework</li>
  <li>Convince you to do Test Driven Development</li>
  <li>Stop you from ever writing another Selenium test</li>
</ul>

<h1 id="objectives">Objectives</h1>

<ul>
  <li>Increase concern for seemingly innocent decisions in class design</li>
  <li>Fight back against exploding CI testing time</li>
  <li>Keep tests focused on the actual behavior of your class</li>
</ul>

<h1 id="types-of-tests">Types of Tests</h1>

<ul>
  <li>Unit</li>
  <li>Boundary</li>
  <li>Integration (Interior)</li>
  <li>End-to-End</li>
  <li>Selenium</li>
  <li>Integration (Exterior)</li>
</ul>

<h1 id="unit-tests">Unit Tests</h1>

<ul>
  <li>Zero setup.</li>
  <li>Do not depend on any other implementations</li>
  <li>No periodic failures</li>
  <li>Screaming fast</li>
</ul>

<h1 id="unit-tests-1">Unit Tests</h1>

<p class="failure_image"><img src="http://localhost:4000/TTTT_pages/assets/images/01_unit_tests.png" alt="Unit Tests" class="img-responsive" /></p>

<h1 id="boundary-tests">Boundary Tests</h1>

<ul>
  <li>Requires some setup</li>
  <li>Test one “neighboring” service</li>
  <li>Can introduce periodic failures</li>
  <li>Slower</li>
</ul>

<h1 id="boundary-tests-1">Boundary Tests</h1>

<p class="failure_image"><img src="http://localhost:4000/TTTT_pages/assets/images/02_boundary_tests.png" alt="Boundary Tests" class="img-responsive" /></p>

<h1 id="integration-tests-internal">Integration Tests - Internal</h1>

<ul>
  <li>More complicated to setup</li>
  <li>Depends on multiple implementations</li>
  <li>Multiple sources of periodic failures</li>
  <li>Multiple slow dependencies</li>
</ul>

<h1 id="integration-tests-internal-1">Integration Tests - Internal</h1>

<p class="failure_image"><img src="http://localhost:4000/TTTT_pages/assets/images/03_integration_tests_internal.png" alt="Integration Tests" class="img-responsive" /></p>

<h1 id="endtoend-tests">End-to-End Tests</h1>

<ul>
  <li>Maximally complicated to setup</li>
  <li>Requires <em>all</em> implementations in application</li>
  <li>Almost as slow as it gets</li>
  <li>Will confirm user expectations</li>
</ul>

<h1 id="endtoend-tests-1">End-to-End Tests</h1>

<p class="failure_image"><img src="http://localhost:4000/TTTT_pages/assets/images/04_end_to_end_tests.png" alt="End-to-End Tests" class="img-responsive" /></p>

<h1 id="selenium-tests">Selenium Tests</h1>

<ul>
  <li>More local environment dependencies</li>
  <li>Slow enough to watch them happen in real time!</li>
  <li>Still Necessary</li>
</ul>

<h1 id="selenium-tests-1">Selenium Tests</h1>

<p class="failure_image"><img src="http://localhost:4000/TTTT_pages/assets/images/05_selenium_tests.png" alt="Selenium Tests" class="img-responsive" /></p>

<h1 id="integration-tests-external">Integration Tests - External</h1>

<ul>
  <li>You have no control over your dependencies</li>
  <li>Human-contact with another organization</li>
  <li>Is the other organization obligated to help?</li>
  <li>Clean explanation of production failures</li>
</ul>

<h1 id="integration-tests-external-1">Integration Tests - External</h1>

<p class="failure_image"><img src="http://localhost:4000/TTTT_pages/assets/images/06_integration_tests_external.png" alt="Integration Tests" class="img-responsive" /></p>

<h1 id="code-coverage">Code Coverage</h1>

<h2 class="center" id="how-should-we-achieve-full-coverage">How should we achieve full coverage?</h2>
<h1 id="code-coverage-1">Code Coverage</h1>

<p class="full_image"><img src="http://localhost:4000/TTTT_pages/assets/images/coverage/01.png" alt="Code Coverage" class="img-responsive" /></p>

<h1 id="code-coverage-2">Code Coverage</h1>

<p class="full_image"><img src="http://localhost:4000/TTTT_pages/assets/images/coverage/02.png" alt="Code Coverage" class="img-responsive" /></p>

<h1 id="code-coverage-3">Code Coverage</h1>

<p class="full_image"><img src="http://localhost:4000/TTTT_pages/assets/images/coverage/03.png" alt="Code Coverage" class="img-responsive" /></p>

<h1 id="code-coverage-4">Code Coverage</h1>

<p class="full_image"><img src="http://localhost:4000/TTTT_pages/assets/images/coverage/04.png" alt="Code Coverage" class="img-responsive" /></p>

<h1 id="code-coverage-5">Code Coverage</h1>

<p class="full_image"><img src="http://localhost:4000/TTTT_pages/assets/images/coverage/05.png" alt="Code Coverage" class="img-responsive" /></p>

<h1 id="code-coverage-6">Code Coverage</h1>

<p class="full_image"><img src="http://localhost:4000/TTTT_pages/assets/images/coverage/06.png" alt="Code Coverage" class="img-responsive" /></p>

<h1 id="code-coverage-7">Code Coverage</h1>

<table>
  <thead>
    <tr>
      <th>Test Type</th>
      <th>Coverage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Unit</td>
      <td>Additive</td>
    </tr>
    <tr>
      <td>Integration</td>
      <td>Combinatorial</td>
    </tr>
    <tr>
      <td>End-to-End</td>
      <td>max(Combinatorial)</td>
    </tr>
    <tr>
      <td>Boundary</td>
      <td>Additive</td>
    </tr>
  </tbody>
</table>

<h1 id="live-demo">Live Demo</h1>

<ul>
  <li>A generic <code class="highlighter-rouge">Application</code> with fallible components</li>
  <li>How service disruptions affect multiple suites</li>
  <li>Experience some intermittent failures.</li>
</ul>

<h1 id="demo-concepts">Demo Concepts</h1>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">ServiceStatus</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">ensureServiceIsRunning</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Check property file and throw a RuntimeException </span>
        <span class="c1">// if turned off.</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h1 id="demo-concepts-1">Demo Concepts</h1>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">UnreliableService</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">UnreliableService</span><span class="o">&gt;</span> <span class="n">dependencies</span><span class="o">;</span>
    
    <span class="n">Duration</span> <span class="nf">fallibleAction</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">ServiceStatus</span><span class="o">.</span><span class="na">ensureServiceIsRunning</span><span class="o">(</span><span class="n">serviceName</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">dependencies</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span>
            <span class="n">dependency</span><span class="o">-&gt;</span><span class="n">dependency</span><span class="o">.</span><span class="na">fallibleAction</span>
        <span class="o">);</span>
        <span class="o">...</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<h1 id="demo-concepts-2">Demo Concepts</h1>
<h2 id="unreliableservice-implementations">UnreliableService Implementations</h2>

<ul>
  <li>Mapper</li>
  <li>Logic</li>
  <li>RestResource</li>
  <li>ThirdPartyResource</li>
  <li>Application</li>
</ul>

<h1 id="demo-concepts-3">Demo Concepts</h1>

<ul>
  <li>TestSuiteCalculator
    <ul>
      <li>Organization - How many people?</li>
      <li>CodeBase - How many classes?</li>
      <li>TestingPeriod - How many executions?</li>
    </ul>
  </li>
</ul>

<h1 id="live-demo-1">Live Demo</h1>

<h2 class="center" id="get-thee-to-intellij"><em>Get thee to Intellij</em></h2>

<h1 id="timesensitive-tests">Time-Sensitive Tests</h1>

<p>Concepts that can be painful to model:</p>

<p>“Tomorrow”</p>

<p>“Last year”</p>

<p>“In the next 6 months”</p>

<h1 id="timesensitive-tests-1">Time-Sensitive Tests</h1>

<p>We want tests that:</p>
<ul>
  <li>Work today</li>
  <li>Work tomorrow</li>
  <li>Work after humanity has become multi-planetary</li>
</ul>

<h1 id="timesensitive-tests-2">Time-Sensitive Tests</h1>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">lastTen</span> <span class="o">=</span>
            <span class="n">eventLogic</span><span class="o">.</span><span class="na">inLast10Minutes</span><span class="o">(</span><span class="n">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">());</span>
        <span class="c1">// Other commands...</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">lastOne</span> <span class="o">=</span> 
            <span class="n">eventLogic</span><span class="o">.</span><span class="na">inLastMinute</span><span class="o">(</span><span class="n">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">());</span>
            
        <span class="n">assertTrue</span><span class="o">(</span> <span class="n">lastTen</span><span class="o">.</span><span class="na">containsAll</span><span class="o">(</span><span class="n">lastOne</span><span class="o">)</span> <span class="o">);</span>
    <span class="o">}</span></code></pre></figure>

<h1 id="entire-test-runs-at-the-current-instant">Entire Test runs at the current Instant</h1>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Instant</span> <span class="n">now</span> <span class="o">=</span> <span class="n">Instant</span><span class="o">.</span><span class="na">now</span><span class="o">();</span>
        
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">lastTen</span> <span class="o">=</span> <span class="n">eventLogic</span><span class="o">.</span><span class="na">inLast10Minutes</span><span class="o">(</span><span class="n">now</span><span class="o">);</span>
        <span class="c1">// ... Other commands/assertions ...</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">lastOne</span> <span class="o">=</span> <span class="n">eventLogic</span><span class="o">.</span><span class="na">inLastMinute</span><span class="o">(</span><span class="n">now</span><span class="o">);</span>
        
        <span class="n">assertTrue</span><span class="o">(</span> <span class="n">lastTen</span><span class="o">.</span><span class="na">containsAll</span><span class="o">(</span><span class="n">lastOne</span><span class="o">)</span> <span class="o">);</span>
    <span class="o">}</span></code></pre></figure>

<h1 id="entire-test-runs-at-a-fixed-instant">Entire Test runs at a fixed Instant</h1>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="n">Clock</span> <span class="n">clock</span> <span class="o">=</span> <span class="n">Clock</span><span class="o">.</span><span class="na">fixed</span><span class="o">(</span>
                    <span class="n">Instant</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2018-08-08T00:00:00Z"</span><span class="o">),</span>
                    <span class="n">ZoneId</span><span class="o">.</span><span class="na">systemDefault</span><span class="o">());</span>
    <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Instant</span> <span class="n">now</span> <span class="o">=</span> <span class="n">clock</span><span class="o">.</span><span class="na">instant</span><span class="o">();</span>
        
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">lastTen</span> <span class="o">=</span> <span class="n">eventLogic</span><span class="o">.</span><span class="na">inLast10Minutes</span><span class="o">(</span><span class="n">now</span><span class="o">);</span>
        <span class="c1">// Other commands ...</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">lastOne</span> <span class="o">=</span> <span class="n">eventLogic</span><span class="o">.</span><span class="na">inLastMinute</span><span class="o">(</span><span class="n">now</span><span class="o">);</span>
        
        <span class="n">assertTrue</span><span class="o">(</span> <span class="n">lastTen</span><span class="o">.</span><span class="na">containsAll</span><span class="o">(</span><span class="n">lastOne</span><span class="o">)</span> <span class="o">);</span>
    <span class="o">}</span></code></pre></figure>

<h1 id="completely-timeinsensitive-test">Completely Time-Insensitive Test</h1>

<figure class="highlight"><pre><code class="language-java" data-lang="java">    <span class="n">Clock</span> <span class="n">clock</span> <span class="o">=</span> <span class="n">Clock</span><span class="o">.</span><span class="na">fixed</span><span class="o">(</span>
                    <span class="n">Instant</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"2018-08-08T00:00:00Z"</span><span class="o">),</span>
                    <span class="n">ZoneId</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"America/Denver"</span><span class="o">));</span>
    <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Instant</span> <span class="n">now</span> <span class="o">=</span> <span class="n">clock</span><span class="o">.</span><span class="na">instant</span><span class="o">();</span>
        
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">lastTen</span> <span class="o">=</span> <span class="n">eventLogic</span><span class="o">.</span><span class="na">inLast10Minutes</span><span class="o">(</span><span class="n">now</span><span class="o">);</span>
        <span class="c1">// Other commands ... </span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Event</span><span class="o">&gt;</span> <span class="n">lastOne</span> <span class="o">=</span> <span class="n">eventLogic</span><span class="o">.</span><span class="na">inLastMinute</span><span class="o">(</span><span class="n">now</span><span class="o">);</span>
        
        <span class="n">assertTrue</span><span class="o">(</span> <span class="n">lastTen</span><span class="o">.</span><span class="na">containsAll</span><span class="o">(</span><span class="n">lastOne</span><span class="o">)</span> <span class="o">);</span>
    <span class="o">}</span></code></pre></figure>

<h1 id="solo-project-stats">Solo Project Stats</h1>

<table>
  <thead>
    <tr>
      <th>codebase</th>
      <th>instances</th>
      <th>runtime</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>adolescent</td>
      <td>Mocks</td>
      <td>0:00:01</td>
    </tr>
    <tr>
      <td>adolescent</td>
      <td>Real</td>
      <td>0:00:04</td>
    </tr>
    <tr>
      <td>established</td>
      <td>Mocks</td>
      <td>0:00:10</td>
    </tr>
    <tr>
      <td>established</td>
      <td>Real</td>
      <td>0:00:25</td>
    </tr>
    <tr>
      <td>mature</td>
      <td>Mocks</td>
      <td>0:00:19</td>
    </tr>
    <tr>
      <td>mature</td>
      <td>Real</td>
      <td>0:00:59</td>
    </tr>
  </tbody>
</table>

<h1 id="midsized-organization-stats">Mid-sized Organization Stats</h1>

<table>
  <thead>
    <tr>
      <th>codebase</th>
      <th>instances</th>
      <th>runtime</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>adolescent</td>
      <td>Mocks</td>
      <td>0:00:49</td>
    </tr>
    <tr>
      <td>adolescent</td>
      <td>Real</td>
      <td>0:02:03</td>
    </tr>
    <tr>
      <td>established</td>
      <td>Mocks</td>
      <td>0:04:49</td>
    </tr>
    <tr>
      <td>established</td>
      <td>Real</td>
      <td>0:12:00</td>
    </tr>
    <tr>
      <td>mature</td>
      <td>Mocks</td>
      <td>0:09:16</td>
    </tr>
    <tr>
      <td>mature</td>
      <td>Real</td>
      <td>0:27:53</td>
    </tr>
  </tbody>
</table>

<h1 id="questions">Questions</h1>

<p class="center">Have any?</p>

<hr />


    </section>
</div>



<script type="text/javascript">
    function addSwipesToContent() {
        var content = document.getElementById("main_content");
        console.log("content: " + content);
        detectswipe("main_content", swipeNavigation);
    }
addLoadEvent(addSwipesToContent)
</script>
</body>
</html>